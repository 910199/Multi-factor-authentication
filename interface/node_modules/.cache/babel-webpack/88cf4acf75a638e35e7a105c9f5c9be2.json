{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction EmailComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \" \\\"Your email address is invalid, please enter in the form of 'xxx@xxx'\\\" \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EmailComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(\"mailing...\");\n  }\n}\n\nfunction EmailComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" MFA Mail Result: \", ctx_r2.result, \" \");\n  }\n}\n\nexport class EmailComponent {\n  constructor(formbuilder, http, route) {\n    var _a;\n\n    this.formbuilder = formbuilder;\n    this.http = http;\n    this.route = route;\n    this.emailForm = this.formbuilder.group({\n      email: ['', [Validators.required, Validators.pattern(\"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+$\")]]\n    });\n    this.email_status = (_a = this.emailForm.get(\"email\")) === null || _a === void 0 ? void 0 : _a.statusChanges;\n    this.mailed = false;\n    this.route.params.subscribe(params => {\n      this.userid = params['userid'];\n    });\n  }\n\n  ngOnInit() {}\n\n  send_mail() {\n    this.http.post('http://localhost:8000/mfa/mail', {\n      address: this.emailForm.value.email,\n      userid: this.userid\n    }).subscribe(data => {\n      this.mailed = false;\n      window.alert(data);\n    }, error => {\n      this.mailed = false;\n    });\n    this.emailForm.reset();\n    this.mailed = true;\n  }\n\n  checkValid() {\n    this.http.post('http://localhost:8000/mfa/emailValid', {\n      inputCode: this.inputCode,\n      userid: this.userid\n    }).subscribe(data => {\n      this.result = data;\n    }, error => {\n      let err_msg = \"404 Not Found: \" + error.error;\n      console.log(err_msg);\n      this.result = error.error;\n    });\n  }\n\n  get emailnoValid() {\n    return this.emailForm.get(\"email\").invalid && this.emailForm.get('email').touched;\n  }\n\n}\n\nEmailComponent.ɵfac = function EmailComponent_Factory(t) {\n  return new (t || EmailComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nEmailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EmailComponent,\n  selectors: [[\"app-email\"]],\n  inputs: {\n    email: \"email\",\n    inputCode: \"inputCode\"\n  },\n  decls: 16,\n  vars: 10,\n  consts: [[1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"email_input\"], [\"for\", \"email\"], [\"id\", \"email\", \"type\", \"text\", \"placeholder\", \"xxx@gmail.com\", \"formControlName\", \"email\"], [\"type\", \"submit\", 1, \"button_send_otp\", 3, \"disabled\"], [\"id\", \"email_valid\", 4, \"ngIf\"], [\"id\", \"mailed\", 4, \"ngIf\"], [\"for\", \"otpCode\"], [\"id\", \"otpCode\", \"placeholder\", \"OTP CODE\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [4, \"ngIf\"], [\"id\", \"email_valid\"], [\"id\", \"mailed\"]],\n  template: function EmailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelementStart(1, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function EmailComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.send_mail();\n      });\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵelementStart(3, \"label\", 2);\n      i0.ɵɵtext(4, \"enter your email to receive OTP Code: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵtext(7, \"Send OTP\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, EmailComponent_div_8_Template, 2, 0, \"div\", 5);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵtemplate(10, EmailComponent_div_10_Template, 2, 1, \"div\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\");\n      i0.ɵɵelementStart(12, \"label\", 7);\n      i0.ɵɵtext(13, \"OTP code (Press Enter to Submit) : \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function EmailComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.inputCode = $event;\n      })(\"change\", function EmailComponent_Template_input_change_14_listener() {\n        return ctx.checkValid();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, EmailComponent_div_15_Template, 2, 1, \"div\", 9);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.emailForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵclassProp(\"is-invalid\", ctx.emailnoValid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.emailForm.invalid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(9, 8, ctx.email_status) === \"INVALID\" && !ctx.mailed);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.mailed);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.inputCode);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.inputCode);\n    }\n  },\n  directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i4.NgIf, i1.NgModel],\n  pipes: [i4.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlbWFpbC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["C:/Users/jeffery.chen/Desktop/MFA_POC/interface/src/app/email/email.component.ts"],"names":["Validators","i0","i1","i2","i3","i4","EmailComponent_div_8_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","EmailComponent_div_10_Template","ɵɵadvance","ɵɵtextInterpolate","EmailComponent_div_15_Template","ctx_r2","ɵɵnextContext","ɵɵtextInterpolate1","result","EmailComponent","constructor","formbuilder","http","route","_a","emailForm","group","email","required","pattern","email_status","get","statusChanges","mailed","params","subscribe","userid","ngOnInit","send_mail","post","address","value","data","window","alert","error","reset","checkValid","inputCode","err_msg","console","log","emailnoValid","invalid","touched","ɵfac","EmailComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","HttpClient","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","decls","vars","consts","template","EmailComponent_Template","ɵɵlistener","EmailComponent_Template_form_ngSubmit_1_listener","ɵɵelement","ɵɵtemplate","ɵɵpipe","EmailComponent_Template_input_ngModelChange_14_listener","$event","EmailComponent_Template_input_change_14_listener","ɵɵproperty","ɵɵclassProp","ɵɵpipeBind1","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","NgIf","NgModel","pipes","AsyncPipe","styles"],"mappings":"AAAA,SAASA,UAAT,QAA2B,gBAA3B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;;AACA,SAASC,6BAAT,CAAuCC,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC1DN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B;AACAR,IAAAA,EAAE,CAACS,MAAH,CAAU,CAAV,EAAa,4EAAb;AACAT,IAAAA,EAAE,CAACU,YAAH;AACH;AAAE;;AACH,SAASC,8BAAT,CAAwCL,EAAxC,EAA4CC,GAA5C,EAAiD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC3DN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B;AACAR,IAAAA,EAAE,CAACS,MAAH,CAAU,CAAV;AACAT,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACVN,IAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,IAAAA,EAAE,CAACa,iBAAH,CAAqB,YAArB;AACH;AAAE;;AACH,SAASC,8BAAT,CAAwCR,EAAxC,EAA4CC,GAA5C,EAAiD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC3DN,IAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB;AACAR,IAAAA,EAAE,CAACS,MAAH,CAAU,CAAV;AACAT,IAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMS,MAAM,GAAGf,EAAE,CAACgB,aAAH,EAAf;AACAhB,IAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,IAAAA,EAAE,CAACiB,kBAAH,CAAsB,oBAAtB,EAA4CF,MAAM,CAACG,MAAnD,EAA2D,GAA3D;AACH;AAAE;;AACH,OAAO,MAAMC,cAAN,CAAqB;AACxBC,EAAAA,WAAW,CAACC,WAAD,EAAcC,IAAd,EAAoBC,KAApB,EAA2B;AAClC,QAAIC,EAAJ;;AACA,SAAKH,WAAL,GAAmBA,WAAnB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKE,SAAL,GAAiB,KAAKJ,WAAL,CAAiBK,KAAjB,CAAuB;AACpCC,MAAAA,KAAK,EAAE,CAAC,EAAD,EAAK,CAAC5B,UAAU,CAAC6B,QAAZ,EAAsB7B,UAAU,CAAC8B,OAAX,CAAmB,oCAAnB,CAAtB,CAAL;AAD6B,KAAvB,CAAjB;AAGA,SAAKC,YAAL,GAAoB,CAACN,EAAE,GAAG,KAAKC,SAAL,CAAeM,GAAf,CAAmB,OAAnB,CAAN,MAAuC,IAAvC,IAA+CP,EAAE,KAAK,KAAK,CAA3D,GAA+D,KAAK,CAApE,GAAwEA,EAAE,CAACQ,aAA/F;AACA,SAAKC,MAAL,GAAc,KAAd;AACA,SAAKV,KAAL,CAAWW,MAAX,CAAkBC,SAAlB,CAA4BD,MAAM,IAAI;AAAE,WAAKE,MAAL,GAAcF,MAAM,CAAC,QAAD,CAApB;AAAiC,KAAzE;AACH;;AACDG,EAAAA,QAAQ,GAAG,CACV;;AACDC,EAAAA,SAAS,GAAG;AACR,SAAKhB,IAAL,CAAUiB,IAAV,CAAe,gCAAf,EAAiD;AAAEC,MAAAA,OAAO,EAAE,KAAKf,SAAL,CAAegB,KAAf,CAAqBd,KAAhC;AAAuCS,MAAAA,MAAM,EAAE,KAAKA;AAApD,KAAjD,EAA+GD,SAA/G,CAAyHO,IAAI,IAAI;AAC7H,WAAKT,MAAL,GAAc,KAAd;AACAU,MAAAA,MAAM,CAACC,KAAP,CAAaF,IAAb;AACH,KAHD,EAGGG,KAAK,IAAI;AAAE,WAAKZ,MAAL,GAAc,KAAd;AAAsB,KAHpC;AAIA,SAAKR,SAAL,CAAeqB,KAAf;AACA,SAAKb,MAAL,GAAc,IAAd;AACH;;AACDc,EAAAA,UAAU,GAAG;AACT,SAAKzB,IAAL,CAAUiB,IAAV,CAAe,sCAAf,EAAuD;AAAES,MAAAA,SAAS,EAAE,KAAKA,SAAlB;AAA6BZ,MAAAA,MAAM,EAAE,KAAKA;AAA1C,KAAvD,EAA2GD,SAA3G,CAAqHO,IAAI,IAAI;AAAE,WAAKxB,MAAL,GAAcwB,IAAd;AAAqB,KAApJ,EAAsJG,KAAK,IAAI;AAC3J,UAAII,OAAO,GAAG,oBAAoBJ,KAAK,CAACA,KAAxC;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,WAAK/B,MAAL,GAAc2B,KAAK,CAACA,KAApB;AACH,KAJD;AAKH;;AACe,MAAZO,YAAY,GAAG;AACf,WAAO,KAAK3B,SAAL,CAAeM,GAAf,CAAmB,OAAnB,EAA4BsB,OAA5B,IAAuC,KAAK5B,SAAL,CAAeM,GAAf,CAAmB,OAAnB,EAA4BuB,OAA1E;AACH;;AAhCuB;;AAkC5BnC,cAAc,CAACoC,IAAf,GAAsB,SAASC,sBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAO,KAAKA,CAAC,IAAItC,cAAV,EAA0BnB,EAAE,CAAC0D,iBAAH,CAAqBzD,EAAE,CAAC0D,WAAxB,CAA1B,EAAgE3D,EAAE,CAAC0D,iBAAH,CAAqBxD,EAAE,CAAC0D,UAAxB,CAAhE,EAAqG5D,EAAE,CAAC0D,iBAAH,CAAqBvD,EAAE,CAAC0D,cAAxB,CAArG,CAAP;AAAuJ,CAAlN;;AACA1C,cAAc,CAAC2C,IAAf,GAAsB,aAAc9D,EAAE,CAAC+D,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE7C,cAAR;AAAwB8C,EAAAA,SAAS,EAAE,CAAC,CAAC,WAAD,CAAD,CAAnC;AAAoDC,EAAAA,MAAM,EAAE;AAAEvC,IAAAA,KAAK,EAAE,OAAT;AAAkBqB,IAAAA,SAAS,EAAE;AAA7B,GAA5D;AAAwGmB,EAAAA,KAAK,EAAE,EAA/G;AAAmHC,EAAAA,IAAI,EAAE,EAAzH;AAA6HC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,EAAY,CAAZ,EAAe,WAAf,EAA4B,UAA5B,CAAD,EAA0C,CAAC,CAAD,EAAI,aAAJ,CAA1C,EAA8D,CAAC,KAAD,EAAQ,OAAR,CAA9D,EAAgF,CAAC,IAAD,EAAO,OAAP,EAAgB,MAAhB,EAAwB,MAAxB,EAAgC,aAAhC,EAA+C,eAA/C,EAAgE,iBAAhE,EAAmF,OAAnF,CAAhF,EAA6K,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,iBAAtB,EAAyC,CAAzC,EAA4C,UAA5C,CAA7K,EAAsO,CAAC,IAAD,EAAO,aAAP,EAAsB,CAAtB,EAAyB,MAAzB,CAAtO,EAAwQ,CAAC,IAAD,EAAO,QAAP,EAAiB,CAAjB,EAAoB,MAApB,CAAxQ,EAAqS,CAAC,KAAD,EAAQ,SAAR,CAArS,EAAyT,CAAC,IAAD,EAAO,SAAP,EAAkB,aAAlB,EAAiC,UAAjC,EAA6C,CAA7C,EAAgD,SAAhD,EAA2D,eAA3D,EAA4E,QAA5E,CAAzT,EAAgZ,CAAC,CAAD,EAAI,MAAJ,CAAhZ,EAA6Z,CAAC,IAAD,EAAO,aAAP,CAA7Z,EAAob,CAAC,IAAD,EAAO,QAAP,CAApb,CAArI;AAA4kBC,EAAAA,QAAQ,EAAE,SAASC,uBAAT,CAAiCjE,EAAjC,EAAqCC,GAArC,EAA0C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC/rBN,MAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB;AACAR,MAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,MAArB,EAA6B,CAA7B;AACAR,MAAAA,EAAE,CAACwE,UAAH,CAAc,UAAd,EAA0B,SAASC,gDAAT,GAA4D;AAAE,eAAOlE,GAAG,CAAC+B,SAAJ,EAAP;AAAyB,OAAjH;AACAtC,MAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAR,MAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B;AACAR,MAAAA,EAAE,CAACS,MAAH,CAAU,CAAV,EAAa,wCAAb;AACAT,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb,EAAgB,OAAhB,EAAyB,CAAzB;AACA1E,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAACQ,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,CAA/B;AACAR,MAAAA,EAAE,CAACS,MAAH,CAAU,CAAV,EAAa,UAAb;AACAT,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAAC2E,UAAH,CAAc,CAAd,EAAiBtE,6BAAjB,EAAgD,CAAhD,EAAmD,CAAnD,EAAsD,KAAtD,EAA6D,CAA7D;AACAL,MAAAA,EAAE,CAAC4E,MAAH,CAAU,CAAV,EAAa,OAAb;AACA5E,MAAAA,EAAE,CAAC2E,UAAH,CAAc,EAAd,EAAkBhE,8BAAlB,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,KAAxD,EAA+D,CAA/D;AACAX,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAACQ,cAAH,CAAkB,EAAlB,EAAsB,KAAtB;AACAR,MAAAA,EAAE,CAACQ,cAAH,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B,CAA/B;AACAR,MAAAA,EAAE,CAACS,MAAH,CAAU,EAAV,EAAc,qCAAd;AACAT,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAACQ,cAAH,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B,CAA/B;AACAR,MAAAA,EAAE,CAACwE,UAAH,CAAc,eAAd,EAA+B,SAASK,uDAAT,CAAiEC,MAAjE,EAAyE;AAAE,eAAOvE,GAAG,CAACyC,SAAJ,GAAgB8B,MAAvB;AAAgC,OAA1I,EAA4I,QAA5I,EAAsJ,SAASC,gDAAT,GAA4D;AAAE,eAAOxE,GAAG,CAACwC,UAAJ,EAAP;AAA0B,OAA9O;AACA/C,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAACU,YAAH;AACAV,MAAAA,EAAE,CAAC2E,UAAH,CAAc,EAAd,EAAkB7D,8BAAlB,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,KAAxD,EAA+D,CAA/D;AACAd,MAAAA,EAAE,CAACU,YAAH;AACH;;AAAC,QAAIJ,EAAE,GAAG,CAAT,EAAY;AACVN,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACgF,UAAH,CAAc,WAAd,EAA2BzE,GAAG,CAACkB,SAA/B;AACAzB,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACiF,WAAH,CAAe,YAAf,EAA6B1E,GAAG,CAAC6C,YAAjC;AACApD,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACgF,UAAH,CAAc,UAAd,EAA0BzE,GAAG,CAACkB,SAAJ,CAAc4B,OAAxC;AACArD,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACgF,UAAH,CAAc,MAAd,EAAsBhF,EAAE,CAACkF,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqB3E,GAAG,CAACuB,YAAzB,MAA2C,SAA3C,IAAwD,CAACvB,GAAG,CAAC0B,MAAnF;AACAjC,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACgF,UAAH,CAAc,MAAd,EAAsBzE,GAAG,CAAC0B,MAA1B;AACAjC,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACgF,UAAH,CAAc,SAAd,EAAyBzE,GAAG,CAACyC,SAA7B;AACAhD,MAAAA,EAAE,CAACY,SAAH,CAAa,CAAb;AACAZ,MAAAA,EAAE,CAACgF,UAAH,CAAc,MAAd,EAAsBzE,GAAG,CAACyC,SAA1B;AACH;AAAE,GA1CkD;AA0ChDmC,EAAAA,UAAU,EAAE,CAAClF,EAAE,CAACmF,aAAJ,EAAmBnF,EAAE,CAACoF,oBAAtB,EAA4CpF,EAAE,CAACqF,kBAA/C,EAAmErF,EAAE,CAACsF,oBAAtE,EAA4FtF,EAAE,CAACuF,eAA/F,EAAgHvF,EAAE,CAACwF,eAAnH,EAAoIrF,EAAE,CAACsF,IAAvI,EAA6IzF,EAAE,CAAC0F,OAAhJ,CA1CoC;AA0CsHC,EAAAA,KAAK,EAAE,CAACxF,EAAE,CAACyF,SAAJ,CA1C7H;AA0C6IC,EAAAA,MAAM,EAAE,CAAC,qKAAD;AA1CrJ,CAArB,CAApC","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"@angular/common/http\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/common\";\r\nfunction EmailComponent_div_8_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 10);\r\n    i0.ɵɵtext(1, \" \\\"Your email address is invalid, please enter in the form of 'xxx@xxx'\\\" \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction EmailComponent_div_10_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 11);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(\"mailing...\");\r\n} }\r\nfunction EmailComponent_div_15_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r2 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" MFA Mail Result: \", ctx_r2.result, \" \");\r\n} }\r\nexport class EmailComponent {\r\n    constructor(formbuilder, http, route) {\r\n        var _a;\r\n        this.formbuilder = formbuilder;\r\n        this.http = http;\r\n        this.route = route;\r\n        this.emailForm = this.formbuilder.group({\r\n            email: ['', [Validators.required, Validators.pattern(\"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+$\")]]\r\n        });\r\n        this.email_status = (_a = this.emailForm.get(\"email\")) === null || _a === void 0 ? void 0 : _a.statusChanges;\r\n        this.mailed = false;\r\n        this.route.params.subscribe(params => { this.userid = params['userid']; });\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    send_mail() {\r\n        this.http.post('http://localhost:8000/mfa/mail', { address: this.emailForm.value.email, userid: this.userid }).subscribe(data => {\r\n            this.mailed = false;\r\n            window.alert(data);\r\n        }, error => { this.mailed = false; });\r\n        this.emailForm.reset();\r\n        this.mailed = true;\r\n    }\r\n    checkValid() {\r\n        this.http.post('http://localhost:8000/mfa/emailValid', { inputCode: this.inputCode, userid: this.userid }).subscribe(data => { this.result = data; }, error => {\r\n            let err_msg = \"404 Not Found: \" + error.error;\r\n            console.log(err_msg);\r\n            this.result = error.error;\r\n        });\r\n    }\r\n    get emailnoValid() {\r\n        return this.emailForm.get(\"email\").invalid && this.emailForm.get('email').touched;\r\n    }\r\n}\r\nEmailComponent.ɵfac = function EmailComponent_Factory(t) { return new (t || EmailComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.ActivatedRoute)); };\r\nEmailComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: EmailComponent, selectors: [[\"app-email\"]], inputs: { email: \"email\", inputCode: \"inputCode\" }, decls: 16, vars: 10, consts: [[1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"email_input\"], [\"for\", \"email\"], [\"id\", \"email\", \"type\", \"text\", \"placeholder\", \"xxx@gmail.com\", \"formControlName\", \"email\"], [\"type\", \"submit\", 1, \"button_send_otp\", 3, \"disabled\"], [\"id\", \"email_valid\", 4, \"ngIf\"], [\"id\", \"mailed\", 4, \"ngIf\"], [\"for\", \"otpCode\"], [\"id\", \"otpCode\", \"placeholder\", \"OTP CODE\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [4, \"ngIf\"], [\"id\", \"email_valid\"], [\"id\", \"mailed\"]], template: function EmailComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\");\r\n        i0.ɵɵelementStart(1, \"form\", 0);\r\n        i0.ɵɵlistener(\"ngSubmit\", function EmailComponent_Template_form_ngSubmit_1_listener() { return ctx.send_mail(); });\r\n        i0.ɵɵelementStart(2, \"div\", 1);\r\n        i0.ɵɵelementStart(3, \"label\", 2);\r\n        i0.ɵɵtext(4, \"enter your email to receive OTP Code: \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(5, \"input\", 3);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(6, \"button\", 4);\r\n        i0.ɵɵtext(7, \"Send OTP\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(8, EmailComponent_div_8_Template, 2, 0, \"div\", 5);\r\n        i0.ɵɵpipe(9, \"async\");\r\n        i0.ɵɵtemplate(10, EmailComponent_div_10_Template, 2, 1, \"div\", 6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"div\");\r\n        i0.ɵɵelementStart(12, \"label\", 7);\r\n        i0.ɵɵtext(13, \"OTP code (Press Enter to Submit) : \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(14, \"input\", 8);\r\n        i0.ɵɵlistener(\"ngModelChange\", function EmailComponent_Template_input_ngModelChange_14_listener($event) { return ctx.inputCode = $event; })(\"change\", function EmailComponent_Template_input_change_14_listener() { return ctx.checkValid(); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(15, EmailComponent_div_15_Template, 2, 1, \"div\", 9);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.emailForm);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵclassProp(\"is-invalid\", ctx.emailnoValid);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"disabled\", ctx.emailForm.invalid);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(9, 8, ctx.email_status) === \"INVALID\" && !ctx.mailed);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.mailed);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.inputCode);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.inputCode);\r\n    } }, directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i4.NgIf, i1.NgModel], pipes: [i4.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlbWFpbC5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}